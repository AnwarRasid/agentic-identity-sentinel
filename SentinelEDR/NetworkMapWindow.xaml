<!--
==========================================================================
  Sentinel EDR — NetworkMapWindow.xaml
  Module 2: "The God's Eye View" — Visual Network Map
==========================================================================
  A floating window that renders a real-time graph of active network
  connections.  The local machine sits at the centre; each detected IP
  is drawn as a coloured node connected by a line.

  Colour semantics:
    Blue  = Localhost (this machine)
    Red   = Malicious IP (flagged by Threat Intel)
    Green = Safe / benign IP

  The entire visualisation uses System.Windows.Shapes (Ellipse, Line)
  drawn on a WPF Canvas — no third-party chart libraries required.
==========================================================================
-->
<Window x:Class="SentinelEDR.NetworkMapWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Sentinel EDR — Network Map (God's Eye View)"
        Height="600" Width="800"
        MinHeight="400" MinWidth="500"
        WindowStartupLocation="CenterOwner"
        Background="#FF050505"
        FontFamily="Cascadia Code, Consolas, Courier New">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>   <!-- Header bar -->
            <RowDefinition Height="*"/>      <!-- Canvas area -->
            <RowDefinition Height="Auto"/>   <!-- Legend -->
        </Grid.RowDefinitions>

        <!-- ── Header Bar ──────────────────────────────────────────── -->
        <Border Grid.Row="0"
                Background="#FF1A1A2E"
                Padding="14,8"
                BorderBrush="#FF00F0FF"
                BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="NETWORK MAP"
                               FontSize="14" FontWeight="Bold"
                               Foreground="#FF00F0FF"
                               VerticalAlignment="Center"/>
                    <TextBlock Text="  //  God's Eye View"
                               FontSize="11"
                               Foreground="#FF8892B0"
                               VerticalAlignment="Center"
                               Margin="8,1,0,0"/>
                </StackPanel>

                <TextBlock Grid.Column="1"
                           x:Name="TxtNodeCount"
                           Text="0 nodes"
                           FontSize="11"
                           Foreground="#FF8892B0"
                           VerticalAlignment="Center"/>
            </Grid>
        </Border>

        <!-- ── Main Canvas — all nodes and edges are drawn here ──── -->
        <Canvas Grid.Row="1"
                x:Name="MapCanvas"
                Background="#FF0A0A0A"
                ClipToBounds="True"
                SizeChanged="MapCanvas_SizeChanged"/>

        <!-- ── Legend Bar ──────────────────────────────────────────── -->
        <Border Grid.Row="2"
                Background="#FF1A1A2E"
                Padding="14,6"
                BorderBrush="#FF2A2A4A"
                BorderThickness="0,1,0,0">
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Center">

                <!-- Localhost legend -->
                <Ellipse Width="10" Height="10"
                         Fill="#FF4488FF"
                         VerticalAlignment="Center"
                         Margin="0,0,6,0"/>
                <TextBlock Text="Localhost"
                           FontSize="10"
                           Foreground="#FF8892B0"
                           VerticalAlignment="Center"
                           Margin="0,0,20,0"/>

                <!-- Safe legend -->
                <Ellipse Width="10" Height="10"
                         Fill="#FF39FF14"
                         VerticalAlignment="Center"
                         Margin="0,0,6,0"/>
                <TextBlock Text="Safe IP"
                           FontSize="10"
                           Foreground="#FF8892B0"
                           VerticalAlignment="Center"
                           Margin="0,0,20,0"/>

                <!-- Malicious legend -->
                <Ellipse Width="10" Height="10"
                         Fill="#FFFF003C"
                         VerticalAlignment="Center"
                         Margin="0,0,6,0"/>
                <TextBlock Text="Malicious IP"
                           FontSize="10"
                           Foreground="#FF8892B0"
                           VerticalAlignment="Center"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
